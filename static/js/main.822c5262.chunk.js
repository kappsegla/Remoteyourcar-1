(this["webpackJsonpromete-your-car"]=this["webpackJsonpromete-your-car"]||[]).push([[0],{16:function(e,t,c){},43:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){"use strict";c.r(t);var n=c(1),o=c.n(n),a=c(31),s=c.n(a),r=(c(43),c(16),c(3)),i=c(11),l=c.n(i),d=c(17),h=c(12),j=c.p+"static/media/logo.b2cb48e0.png",u=c(18),b=c.n(u),p=c(7);function m(e){return Date.now()>=1e3*JSON.parse(atob(e.split(".")[1])).exp}var v=c(0),O=function(){var e=Object(r.f)(),t=Object(n.useState)(""),c=Object(h.a)(t,2),o=c[0],a=c[1],s=Object(n.useState)(""),i=Object(h.a)(s,2),u=i[0],O=i[1];window.onload=function(){var t=localStorage.getItem("Token");null===t||m(t)?(console.log("Expired or no token"),localStorage.removeItem("Token")):(console.log("Valid token found"),e.push("/home"))};var k=function(){var t=Object(d.a)(l.a.mark((function t(c){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.next=3,b.a.post("https://h-178-174-162-51.a536.priv.bahnhof.se/auth/",{username:o,password:u});case 3:n=t.sent,a=n.data,console.log(a.access_token),localStorage.setItem("Token",a.access_token),e.push("/home");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"con",children:[Object(v.jsxs)("header",{className:"App-header",children:[Object(v.jsx)("h1",{className:"h1",children:"ITHSC"}),Object(v.jsx)("img",{src:j,className:"App-logo",alt:"logo"})]}),Object(v.jsx)("div",{className:"login-con",children:Object(v.jsxs)("form",{onSubmit:k,children:[Object(v.jsx)("div",{className:"username-div",children:Object(v.jsx)("label",{children:Object(v.jsx)("input",{type:"text",placeholder:"Username:",value:o,id:"username",onChange:function(e){var t=e.target;return a(t.value)},required:!0})})}),Object(v.jsx)("div",{className:"Password-div",children:Object(v.jsx)("label",{children:Object(v.jsx)("input",{type:"password",placeholder:"Password:",id:"password",value:u,onChange:function(e){var t=e.target;return O(t.value)},required:!0})})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{type:"submit",className:"login-button",children:"Login"})})]})}),Object(v.jsx)("p",{children:"Forgot your Password?"}),Object(v.jsx)("p",{children:Object(v.jsx)(p.a,{to:"/register",className:"alink",children:" New RegisterUser? Register Here "})})]})})};c(70);var k=function(){var e=Object(r.f)(),t=localStorage.getItem("Token"),c=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),c=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(c)}(t);Object(n.useEffect)((function(){console.log("useEffect"),null!=t&&m(t)&&(localStorage.removeItem("Token"),e.push("/"))}));var o=c.vehicles;return console.log(o),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{type:"submit",className:"logout",onClick:function(){localStorage.clear(),e.push("/")},children:"Logga ut"}),o.map((function(e){return Object(v.jsx)("div",{className:"linkPadding",children:Object(v.jsxs)(p.a,{to:{pathname:"/lock",carId:e},children:[Object(v.jsx)("div",{children:Object(v.jsx)("img",{src:"data:image/png;base64,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",alt:"Your car"})}),"Car: "+e]})},e)}))]})},g=function(){var e=Object(n.useState)(""),t=Object(h.a)(e,2),c=t[0],o=t[1],a=Object(n.useState)(""),s=Object(h.a)(a,2),r=s[0],i=s[1],u=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,b.a.post("https://h-178-174-162-51.a536.priv.bahnhof.se/sign-up/",{username:c,password:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"con",children:[Object(v.jsxs)("header",{className:"App-header",children:[Object(v.jsx)("h1",{className:"h1",children:"ITHSC"}),Object(v.jsx)("img",{src:j,className:"App-logo",alt:"logo"})]}),Object(v.jsx)("div",{className:"login-con",children:Object(v.jsxs)("form",{onSubmit:u,children:[Object(v.jsx)("div",{className:"username-div",children:Object(v.jsx)("label",{children:Object(v.jsx)("input",{type:"email",placeholder:"Email:",id:"Mail",value:c,onChange:function(e){var t=e.target;return o(t.value)},required:!0})})}),Object(v.jsx)("div",{className:"Password-div",children:Object(v.jsx)("label",{children:Object(v.jsx)("input",{type:"password",placeholder:"Password:",id:"password",value:r,onChange:function(e){var t=e.target;return i(t.value)},required:!0})})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{type:"submit",className:"login-button",children:"Registera"})})]})})]})})},f=c(36),x=c(34),A=c(35),N=c(15),G=c(38),w=c(37),y=c.p+"static/media/backarrow.9939878d.svg";c(71);var C=function(){return Object(v.jsx)("div",{className:"yourCar",children:Object(v.jsx)(p.a,{to:"/home",children:Object(v.jsx)("img",{width:50,height:50,src:y,alt:"Arrow for navigating back"})})})},M=c.p+"static/media/greenlock.1e16003c.svg",I=c.p+"static/media/redlock.92695db5.svg",S=c.p+"static/media/car.d107f261.png",B=(c(72),function(e){Object(G.a)(c,e);var t=Object(w.a)(c);function c(e){var n;return Object(x.a)(this,c),(n=t.call(this,e)).id=2,n.handleLockClick=n.lockVehicle.bind(Object(N.a)(n)),n.handleUnLockClick=n.unLockVehicle.bind(Object(N.a)(n)),n.id=e.location.carId,null==n.id&&(n.id=2),n.state={carId:2,timestamp:0,locked:!1,doorState:{df_open:!1,df_locked:!0,pf_open:!1,pf_locked:!0,dr_open:!1,dr_locked:!0,pr_open:!1,pr_locked:!0,ft_open:!1,ft_locked:!0,rt_open:!1,rt_locked:!0}},n}return Object(A.a)(c,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsxs)("h2",{children:["Vehicle State for carId: ",String(this.state.carId)]}),Object(v.jsx)(C,{}),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("div",{className:"carImage",children:Object(v.jsx)("img",{className:"car",src:S,alt:""})}),Object(v.jsx)("div",{className:"driverDoor",children:this.state.doorState.df_locked?Object(v.jsx)("img",{alt:"Green lock symbol, locked.",src:M,onClick:this.handleUnLockClick,tabIndex:"0"}):Object(v.jsx)("img",{alt:"Red lock symbol, unlocked.",src:I,onClick:this.handleLockClick,tabIndex:"0"})}),Object(v.jsx)("div",{className:"passengerDoor",children:this.state.doorState.pf_locked?Object(v.jsx)("img",{alt:"Green lock symbol, locked.",src:M,onClick:this.handleUnLockClick,tabIndex:"1"}):Object(v.jsx)("img",{alt:"Red lock symbol, unlocked.",src:I,onClick:this.handleLockClick,tabIndex:"1"})}),Object(v.jsx)("div",{className:"driverRearDoor",children:this.state.doorState.dr_locked?Object(v.jsx)("img",{alt:"Green lock symbol, locked.",src:M,onClick:this.handleUnLockClick,tabIndex:"5"}):Object(v.jsx)("img",{alt:"Red lock symbol, unlocked.",src:I,onClick:this.handleLockClick,tabIndex:"5"})}),Object(v.jsx)("div",{className:"passengerRearDoor",children:this.state.doorState.pr_locked?Object(v.jsx)("img",{alt:"Green lock symbol, locked.",src:M,onClick:this.handleUnLockClick,tabIndex:"6"}):Object(v.jsx)("img",{alt:"Red lock symbol, unlocked.",src:I,onClick:this.handleLockClick,tabIndex:"6"})}),Object(v.jsx)("div",{className:"frontTrunk",children:this.state.doorState.ft_locked?Object(v.jsx)("img",{alt:"Green lock symbol, locked.",src:M,onClick:this.handleUnLockClick,tabIndex:"4"}):Object(v.jsx)("img",{alt:"Red lock symbol, unlocked.",src:I,onClick:this.handleLockClick,tabIndex:"4"})}),Object(v.jsx)("div",{className:"rearTrunk",children:this.state.doorState.rt_locked?Object(v.jsx)("img",{alt:"Green lock symbol, locked.",src:M,onClick:this.handleUnLockClick,tabIndex:"3"}):Object(v.jsx)("img",{alt:"Red lock symbol, unlocked.",src:I,onClick:this.handleLockClick,tabIndex:"3"})})]})]})}},{key:"componentDidMount",value:function(){this.reload()}},{key:"reload",value:function(){var e=this,t=localStorage.getItem("Token"),c=new Headers,n="Bearer ".concat(t);c.append("Authorization",n),fetch("https://h-178-174-162-51.a536.priv.bahnhof.se/api/1/vehicles/".concat(this.id,"/data_request/vehicle_state/"),{headers:c}).then((function(e){if(200!==e.status)throw new Error(e.status);return e})).then((function(e){return e.json()})).then((function(t){e.setState(t)})).catch((function(e){console.log(e)}))}},{key:"lockVehicle",value:function(){var e=this,t=localStorage.getItem("Token"),c=new Headers,n="Bearer ".concat(t);c.append("Authorization",n);var o="https://h-178-174-162-51.a536.priv.bahnhof.se/api/1/vehicles/".concat(this.id,"/command/door_lock");fetch(o,{method:"POST",headers:c}).then((function(e){return e.json()})).then((function(t){t&&(console.log('{message: "Locked car '.concat(e.id,'", response: ').concat(t)),e.reload())}))}},{key:"unLockVehicle",value:function(){var e=this,t=localStorage.getItem("Token"),c=new Headers,n="Bearer ".concat(t);c.append("Authorization",n);var o="https://h-178-174-162-51.a536.priv.bahnhof.se/api/1/vehicles/".concat(this.id,"/command/door_unlock");fetch(o,{method:"POST",headers:c}).then((function(e){return e.json()})).then((function(t){t&&(console.log('{message: "UnLocked car '.concat(e.id,'", response: ').concat(t)),e.reload())}))}}]),c}(n.Component));var R=function(){var e=Object(f.a)({basename:"/Remoteyourcar-1"});return Object(v.jsx)(r.b,{history:e,children:Object(v.jsxs)(r.c,{children:[Object(v.jsx)(r.a,{path:"/",exact:!0,component:O}),Object(v.jsx)(r.a,{path:"/home",exact:!0,component:k}),Object(v.jsx)(r.a,{path:"/register",exact:!0,component:g}),Object(v.jsx)(r.a,{path:"/lock",exact:!0,component:B})]})})};s.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(R,{})}),document.getElementById("App"))}},[[73,1,2]]]);
//# sourceMappingURL=main.822c5262.chunk.js.map